<!DOCTYPE html>
<html lang="zh" dir="ltr"><head><title>cosmos sdk概览</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto Serif SC:wght@400;700&amp;family=Noto Sans SC:ital,wght@0,400;0,600;1,400;1,600&amp;family=JetBrains Mono:wght@400;600&amp;display=swap"/><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="MindCarver Blog"/><meta property="og:title" content="cosmos sdk概览"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="cosmos sdk概览"/><meta name="twitter:description" content="cosmos sdk 简介 Cosmos SDK是一个开源框架，用于构建多资产公共权益证明（PoS）区块链，以及许可的授权证明（PoA）区块链。 Cosmos SDK的目标是让开发人员能够轻松地从头开始创建自定义区块链，从而与其他区块链进行本地互操作。基于SDK的区块链是由可组合模块构建的，构建在CometBFT之上。其中大多数是开源的，任何开发者都可以随时使用。任何人都可以为Cosmos SDK创建一个模块，集成已经构建的模块就像将它们导入区块链应用程序一样简单。 cosmos 应用链设计架构 ^ +-------------------------------+ ^ | | | | Bui..."/><meta property="og:description" content="cosmos sdk 简介 Cosmos SDK是一个开源框架，用于构建多资产公共权益证明（PoS）区块链，以及许可的授权证明（PoA）区块链。 Cosmos SDK的目标是让开发人员能够轻松地从头开始创建自定义区块链，从而与其他区块链进行本地互操作。基于SDK的区块链是由可组合模块构建的，构建在CometBFT之上。其中大多数是开源的，任何开发者都可以随时使用。任何人都可以为Cosmos SDK创建一个模块，集成已经构建的模块就像将它们导入区块链应用程序一样简单。 cosmos 应用链设计架构 ^ +-------------------------------+ ^ | | | | Bui..."/><meta property="og:image:alt" content="cosmos sdk 简介 Cosmos SDK是一个开源框架，用于构建多资产公共权益证明（PoS）区块链，以及许可的授权证明（PoA）区块链。 Cosmos SDK的目标是让开发人员能够轻松地从头开始创建自定义区块链，从而与其他区块链进行本地互操作。基于SDK的区块链是由可组合模块构建的，构建在CometBFT之上。其中大多数是开源的，任何开发者都可以随时使用。任何人都可以为Cosmos SDK创建一个模块，集成已经构建的模块就像将它们导入区块链应用程序一样简单。 cosmos 应用链设计架构 ^ +-------------------------------+ ^ | | | | Bui..."/><meta property="og:image" content="https://https://mindcarver.top/static/og-image.png"/><meta property="og:image:url" content="https://https://mindcarver.top/static/og-image.png"/><meta name="twitter:image" content="https://https://mindcarver.top/static/og-image.png"/><meta property="og:image:type" content="image/.png"/><meta property="twitter:domain" content="https://mindcarver.top"/><meta property="og:url" content="https://https//mindcarver.top/blockchainguide/Public_Chain_Development/Public_Chain_Research/cosmos/Cosmos-sdk/cosmos-sdk概览"/><meta property="twitter:url" content="https://https//mindcarver.top/blockchainguide/Public_Chain_Development/Public_Chain_Research/cosmos/Cosmos-sdk/cosmos-sdk概览"/><link rel="icon" href="../../../../../static/icon.png"/><meta name="description" content="cosmos sdk 简介 Cosmos SDK是一个开源框架，用于构建多资产公共权益证明（PoS）区块链，以及许可的授权证明（PoA）区块链。 Cosmos SDK的目标是让开发人员能够轻松地从头开始创建自定义区块链，从而与其他区块链进行本地互操作。基于SDK的区块链是由可组合模块构建的，构建在CometBFT之上。其中大多数是开源的，任何开发者都可以随时使用。任何人都可以为Cosmos SDK创建一个模块，集成已经构建的模块就像将它们导入区块链应用程序一样简单。 cosmos 应用链设计架构 ^ +-------------------------------+ ^ | | | | Bui..."/><meta name="generator" content="Quartz"/><link href="../../../../../index.css" rel="stylesheet" type="text/css" data-persist="true"/><style>.expand-button {
  position: absolute;
  display: flex;
  float: right;
  padding: 0.4rem;
  margin: 0.3rem;
  right: 0;
  color: var(--gray);
  border-color: var(--dark);
  background-color: var(--light);
  border: 1px solid;
  border-radius: 5px;
  opacity: 0;
  transition: 0.2s;
}
.expand-button > svg {
  fill: var(--light);
  filter: contrast(0.3);
}
.expand-button:hover {
  cursor: pointer;
  border-color: var(--secondary);
}
.expand-button:focus {
  outline: 0;
}

pre:hover > .expand-button {
  opacity: 1;
  transition: 0.2s;
}

#mermaid-container {
  position: fixed;
  contain: layout;
  z-index: 999;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: none;
  backdrop-filter: blur(4px);
  background: rgba(0, 0, 0, 0.5);
}
#mermaid-container.active {
  display: inline-block;
}
#mermaid-container > #mermaid-space {
  border: 1px solid var(--lightgray);
  background-color: var(--light);
  border-radius: 5px;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: 80vh;
  width: 80vw;
  overflow: hidden;
}
#mermaid-container > #mermaid-space > .mermaid-content {
  position: relative;
  transform-origin: 0 0;
  transition: transform 0.1s ease;
  overflow: visible;
  min-height: 200px;
  min-width: 200px;
}
#mermaid-container > #mermaid-space > .mermaid-content pre {
  margin: 0;
  border: none;
}
#mermaid-container > #mermaid-space > .mermaid-content svg {
  max-width: none;
  height: auto;
}
#mermaid-container > #mermaid-space > .mermaid-controls {
  position: absolute;
  bottom: 20px;
  right: 20px;
  display: flex;
  gap: 8px;
  padding: 8px;
  background: var(--light);
  border: 1px solid var(--lightgray);
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  z-index: 2;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  border: 1px solid var(--lightgray);
  background: var(--light);
  color: var(--dark);
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
  font-family: var(--bodyFont);
  transition: all 0.2s ease;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:hover {
  background: var(--lightgray);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:active {
  transform: translateY(1px);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:nth-child(2) {
  width: auto;
  padding: 0 12px;
  font-size: 14px;
}
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL2hvbWUvcnVubmVyL3dvcmsvbWluZGNhcnZlci5naXRodWIuaW8vbWluZGNhcnZlci5naXRodWIuaW8vcXVhcnR6L2NvbXBvbmVudHMvc3R5bGVzIiwic291cmNlcyI6WyJtZXJtYWlkLmlubGluZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTs7QUFHRjtFQUNFOzs7QUFLRjtFQUNFO0VBQ0E7OztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTs7QUFJRjtFQUNFO0VBQ0E7RUFDQSIsInNvdXJjZXNDb250ZW50IjpbIi5leHBhbmQtYnV0dG9uIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbG9hdDogcmlnaHQ7XG4gIHBhZGRpbmc6IDAuNHJlbTtcbiAgbWFyZ2luOiAwLjNyZW07XG4gIHJpZ2h0OiAwOyAvLyBOT1RFOiByaWdodCB3aWxsIGJlIHNldCBpbiBtZXJtYWlkLmlubGluZS50c1xuICBjb2xvcjogdmFyKC0tZ3JheSk7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tZGFyayk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWxpZ2h0KTtcbiAgYm9yZGVyOiAxcHggc29saWQ7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgb3BhY2l0eTogMDtcbiAgdHJhbnNpdGlvbjogMC4ycztcblxuICAmID4gc3ZnIHtcbiAgICBmaWxsOiB2YXIoLS1saWdodCk7XG4gICAgZmlsdGVyOiBjb250cmFzdCgwLjMpO1xuICB9XG5cbiAgJjpob3ZlciB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTtcbiAgfVxuXG4gICY6Zm9jdXMge1xuICAgIG91dGxpbmU6IDA7XG4gIH1cbn1cblxucHJlIHtcbiAgJjpob3ZlciA+IC5leHBhbmQtYnV0dG9uIHtcbiAgICBvcGFjaXR5OiAxO1xuICAgIHRyYW5zaXRpb246IDAuMnM7XG4gIH1cbn1cblxuI21lcm1haWQtY29udGFpbmVyIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBjb250YWluOiBsYXlvdXQ7XG4gIHotaW5kZXg6IDk5OTtcbiAgbGVmdDogMDtcbiAgdG9wOiAwO1xuICB3aWR0aDogMTAwdnc7XG4gIGhlaWdodDogMTAwdmg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGRpc3BsYXk6IG5vbmU7XG4gIGJhY2tkcm9wLWZpbHRlcjogYmx1cig0cHgpO1xuICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNSk7XG5cbiAgJi5hY3RpdmUge1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgfVxuXG4gICYgPiAjbWVybWFpZC1zcGFjZSB7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tbGlnaHRncmF5KTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1saWdodCk7XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICB0b3A6IDUwJTtcbiAgICBsZWZ0OiA1MCU7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgaGVpZ2h0OiA4MHZoO1xuICAgIHdpZHRoOiA4MHZ3O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG5cbiAgICAmID4gLm1lcm1haWQtY29udGVudCB7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XG4gICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4xcyBlYXNlO1xuICAgICAgb3ZlcmZsb3c6IHZpc2libGU7XG4gICAgICBtaW4taGVpZ2h0OiAyMDBweDtcbiAgICAgIG1pbi13aWR0aDogMjAwcHg7XG5cbiAgICAgIHByZSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgfVxuXG4gICAgICBzdmcge1xuICAgICAgICBtYXgtd2lkdGg6IG5vbmU7XG4gICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmID4gLm1lcm1haWQtY29udHJvbHMge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgYm90dG9tOiAyMHB4O1xuICAgICAgcmlnaHQ6IDIwcHg7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZ2FwOiA4cHg7XG4gICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1saWdodCk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1saWdodGdyYXkpO1xuICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgIHotaW5kZXg6IDI7XG5cbiAgICAgIC5tZXJtYWlkLWNvbnRyb2wtYnV0dG9uIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIHdpZHRoOiAzMnB4O1xuICAgICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWxpZ2h0Z3JheSk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0KTtcbiAgICAgICAgY29sb3I6IHZhcigtLWRhcmspO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICBmb250LWZhbWlseTogdmFyKC0tYm9keUZvbnQpO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuXG4gICAgICAgICY6aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0Z3JheSk7XG4gICAgICAgIH1cblxuICAgICAgICAmOmFjdGl2ZSB7XG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDFweCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdHlsZSB0aGUgcmVzZXQgYnV0dG9uIGRpZmZlcmVudGx5XG4gICAgICAgICY6bnRoLWNoaWxkKDIpIHtcbiAgICAgICAgICB3aWR0aDogYXV0bztcbiAgICAgICAgICBwYWRkaW5nOiAwIDEycHg7XG4gICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0= */</style><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" data-persist="true"/><script src="../../../../../prescript.js" type="application/javascript" data-persist="true"></script><script type="application/javascript" data-persist="true">const fetchData = fetch("../../../../../static/contentIndex.json").then(data => data.json())</script><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://https://mindcarver.top/index.xml"/></head><body data-slug="blockchainguide/Public_Chain_Development/Public_Chain_Research/cosmos/Cosmos-sdk/cosmos-sdk概览"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href="../../../../..">MindCarver Blog</a></h2><div class="spacer mobile-only"></div><div class="flex-component" style="flex-direction: row; flex-wrap: nowrap; gap: 1rem;"><div style="flex-grow: 1; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><div class="search"><button class="search-button"><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg><p>搜索</p></button><div class="search-container"><div class="search-space"><input autocomplete="off" class="search-bar" name="search" type="text" aria-label="搜索些什么" placeholder="搜索些什么"/><div class="search-layout" data-preview="true"></div></div></div></div></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="暗色模式"><title>暗色模式</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="亮色模式"><title>亮色模式</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="readermode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="readerIcon" fill="currentColor" stroke="currentColor" stroke-width="0.2" stroke-linecap="round" stroke-linejoin="round" width="64px" height="64px" viewBox="0 0 24 24" aria-label="阅读模式"><title>阅读模式</title><g transform="translate(-1.8, -1.8) scale(1.15, 1.2)"><path d="M8.9891247,2.5 C10.1384702,2.5 11.2209868,2.96705384 12.0049645,3.76669482 C12.7883914,2.96705384 13.8709081,2.5 15.0202536,2.5 L18.7549359,2.5 C19.1691495,2.5 19.5049359,2.83578644 19.5049359,3.25 L19.5046891,4.004 L21.2546891,4.00457396 C21.6343849,4.00457396 21.9481801,4.28672784 21.9978425,4.6528034 L22.0046891,4.75457396 L22.0046891,20.25 C22.0046891,20.6296958 21.7225353,20.943491 21.3564597,20.9931534 L21.2546891,21 L2.75468914,21 C2.37499337,21 2.06119817,20.7178461 2.01153575,20.3517706 L2.00468914,20.25 L2.00468914,4.75457396 C2.00468914,4.37487819 2.28684302,4.061083 2.65291858,4.01142057 L2.75468914,4.00457396 L4.50368914,4.004 L4.50444233,3.25 C4.50444233,2.87030423 4.78659621,2.55650904 5.15267177,2.50684662 L5.25444233,2.5 L8.9891247,2.5 Z M4.50368914,5.504 L3.50468914,5.504 L3.50468914,19.5 L10.9478955,19.4998273 C10.4513189,18.9207296 9.73864328,18.5588115 8.96709342,18.5065584 L8.77307039,18.5 L5.25444233,18.5 C4.87474657,18.5 4.56095137,18.2178461 4.51128895,17.8517706 L4.50444233,17.75 L4.50368914,5.504 Z M19.5049359,17.75 C19.5049359,18.1642136 19.1691495,18.5 18.7549359,18.5 L15.2363079,18.5 C14.3910149,18.5 13.5994408,18.8724714 13.0614828,19.4998273 L20.5046891,19.5 L20.5046891,5.504 L19.5046891,5.504 L19.5049359,17.75 Z M18.0059359,3.999 L15.0202536,4 L14.8259077,4.00692283 C13.9889509,4.06666544 13.2254227,4.50975805 12.7549359,5.212 L12.7549359,17.777 L12.7782651,17.7601316 C13.4923805,17.2719483 14.3447024,17 15.2363079,17 L18.0059359,16.999 L18.0056891,4.798 L18.0033792,4.75457396 L18.0056891,4.71 L18.0059359,3.999 Z M8.9891247,4 L6.00368914,3.999 L6.00599909,4.75457396 L6.00599909,4.75457396 L6.00368914,4.783 L6.00368914,16.999 L8.77307039,17 C9.57551536,17 10.3461406,17.2202781 11.0128313,17.6202194 L11.2536891,17.776 L11.2536891,5.211 C10.8200889,4.56369974 10.1361548,4.13636104 9.37521067,4.02745763 L9.18347055,4.00692283 L8.9891247,4 Z"></path></g></svg></button></div></div><div class="profile"><div class="profile-header"><img src="https://avatars.githubusercontent.com/u/32150062?v=4" alt="MindCarver" class="profile-avatar"/><div class="profile-info"><h2 class="profile-name">MindCarver</h2><p class="profile-bio">技术服务于产品</p></div></div><div class="profile-description"><p>深山中的匠心，专注于区块链开发与量化研究。相信最深刻的创新来自专注与坚持。</p></div><div class="profile-skills"><div class="skill-group"><span class="skill-icon">🔗</span><div><strong>区块链</strong><p class="skill-detail">智能合约 · DeFi · ZK证明</p></div></div><div class="skill-group"><span class="skill-icon">🤖</span><div><strong>机器学习</strong><p class="skill-detail">PyTorch · 时序预测 · 交易策略</p></div></div><div class="skill-group"><span class="skill-icon">📈</span><div><strong>量化交易</strong><p class="skill-detail">统计套利 · 风险管理 · MEV</p></div></div></div><div class="profile-links"><a href="https://github.com/mindcarver" target="_blank" rel="noopener" class="profile-link"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>GitHub</a></div></div><div class="explorer" data-behavior="link" data-collapsed="collapsed" data-savestate="true" data-data-fns="{&quot;order&quot;:[&quot;filter&quot;,&quot;map&quot;,&quot;sort&quot;],&quot;sortFn&quot;:&quot;(a,b)=>!a.isFolder&amp;&amp;!b.isFolder||a.isFolder&amp;&amp;b.isFolder?a.displayName.localeCompare(b.displayName,void 0,{numeric:!0,sensitivity:\&quot;base\&quot;}):!a.isFolder&amp;&amp;b.isFolder?1:-1&quot;,&quot;filterFn&quot;:&quot;node=>node.slugSegment!==\&quot;tags\&quot;&quot;,&quot;mapFn&quot;:&quot;node=>node&quot;}"><button type="button" class="explorer-toggle mobile-explorer hide-until-loaded" data-mobile="true" aria-controls="explorer-399"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><button type="button" class="title-button explorer-toggle desktop-explorer" data-mobile="false" aria-expanded="true"><h2>探索</h2><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-399" class="explorer-content" aria-expanded="false" role="group"><ul class="explorer-ul overflow" id="list-0"><li class="overflow-end"></li></ul></div><template id="template-file"><li><a href="#"></a></li></template><template id="template-folder"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div><button class="folder-button"><span class="folder-title"></span></button></div></div><div class="folder-outer"><ul class="content"></ul></div></li></template></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../../../../../">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../../blockchainguide/">区块链技术指南</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../../blockchainguide/Public_Chain_Development/">Public_Chain_Development</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../../blockchainguide/Public_Chain_Development/Public_Chain_Research/">Public_Chain_Research</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../../blockchainguide/Public_Chain_Development/Public_Chain_Research/cosmos/">cosmos</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../../blockchainguide/Public_Chain_Development/Public_Chain_Research/cosmos/Cosmos-sdk/">Cosmos sdk</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>cosmos sdk概览</a></div></nav><h1 class="article-title">cosmos sdk概览</h1><p show-comma="true" class="content-meta"><time datetime="2026-01-22T05:40:03.356Z">2026年1月22日</time><span>22分钟阅读</span></p></div></div><article class="popover-hint"><h2 id="cosmos-sdk-简介">cosmos sdk 简介<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#cosmos-sdk-简介" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>Cosmos SDK是一个开源框架，用于构建多资产公共权益证明（PoS）区块链，以及许可的授权证明（PoA）区块链。</p>
<p>Cosmos SDK的目标是让开发人员能够轻松地从头开始创建自定义区块链，从而与其他区块链进行本地互操作。基于SDK的区块链是由可组合模块构建的，构建在<strong>CometBFT</strong>之上。其中大多数是开源的，任何开发者都可以随时使用。任何人都可以为Cosmos SDK创建一个模块，集成已经构建的模块就像将它们导入区块链应用程序一样简单。</p>
<h2 id="cosmos-应用链设计架构">cosmos 应用链设计架构<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#cosmos-应用链设计架构" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="markdown" data-theme="github-light github-dark"><code data-language="markdown" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                ^  +-------------------------------+  ^</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                |  |                               |  |   Built with Cosmos SDK</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                |  |  State-machine = Application  |  |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                |  |                               |  v</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                |  +-------------------------------+</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                |  |                               |  ^</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Blockchain node |  |           Consensus           |  |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                |  |                               |  |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                |  +-------------------------------+  |   CometBFT</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                |  |                               |  |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                |  |           Networking          |  |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                |  |                               |  |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                v  +-------------------------------+  v</span></span></code></pre></figure>
<h2 id="为什么要用cosmos-sdk-构建链">为什么要用cosmos sdk 构建链<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#为什么要用cosmos-sdk-构建链" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ol>
<li>Cosmos SDK是开源的，随着开源Cosmos SDK模块生态系统的发展，使用它构建复杂的去中心化平台将变得越来越容易。</li>
<li>已经在生产环境中被许多知名项目使用</li>
<li>灵活
<ul>
<li>可以使用多种不同语言构建状态机，cosmos sdk 使用最广泛</li>
<li>开发人员可以自行根据自己需求权衡，比如是否使用SDK中提供的账户模型或者DB等</li>
<li>可以自己选择加密库，不受像拥有虚拟机区块链底层环境限制</li>
</ul>
</li>
<li>性能方面的优势
<ul>
<li>基于cometBFT「<strong>在整个行业中被广泛使用，并被认为是构建风险证明系统的黄金标准共识引擎</strong>」共识，吞吐量远超Pow</li>
<li>构建的特定应用链不会争抢资源和计算能力，比如以太坊的智能合约，经常会遇到交易堵塞，即使在layer2 ，也会受限。</li>
<li>基于虚拟机来解释事务会显著增加计算复杂性</li>
</ul>
</li>
<li>安全
<ul>
<li>dis 不成熟的智能合约语言以及不安全的虚拟机</li>
<li><a href="https://docs.cosmos.network/main/core/ocap" class="external">基于对象能力模型<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>设计思想，使得cosmos sdk 提供了一个非常安全的环境</li>
</ul>
</li>
</ol>
<hr/>
<h2 id="cosmos-sdk-架构设计">cosmos sdk 架构设计<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#cosmos-sdk-架构设计" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>开发者可以直接复用Cosmos-SDK提供的功能模块，也可以基于业务需求实现新的功能模块。每个模块都有自己的存储空间，并可以定义新的消息和相应的处理逻辑。一个消息对应一个链上操作，而一笔交易中可以包含多个消息。从模块化设计的视角来看，一个区块链应用的状态被拆解到多个模块中，每个模块单独管理自己的存储空间，并通过适当的方式与其他模块实现交互。模块的代码组织如下(nft为例)：</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="markdown" data-theme="github-light github-dark"><code data-language="markdown" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nft</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── CHANGELOG.md</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── README.md</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── client</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   └── cli // 本模块支持的命令行方法和REST方法</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│       ├── tx.go // 从命令行构建本模块支持的交易请求</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│       └── tx_test.go </span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── codec.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── errors.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── event.pb.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── expected_keepers.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── genesis.go // 导入模块的初始状态以及导出模块的状态</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── genesis.pb.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── go.mod</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── go.sum</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── internal</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   └── conv</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│       ├── doc.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│       ├── string.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│       └── string_test.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── keeper </span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── class.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── genesis.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── grpc_query.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── grpc_query_test.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── keeper.go // 本模块的子存储空间的读写功能</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── keeper_test.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── keys.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── msg_server.go // 消息处理</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── msg_server_test.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── nft.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── nft_batch.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   └── nft_batch_test.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── keys.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── module</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── autocli.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   └── module.go  // 实现AppModule接口</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── msgs.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── nft.pb.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── query.pb.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── query.pb.gw.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── simulation // 模糊测试相关代码</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── decoder.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── decoder_test.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── genesis.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── genesis_test.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── operations.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   └── operations_test.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── sonar-project.properties</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">├── testutil</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   ├── app_config.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">│   └── expected_keepers_mocks.go</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">└── tx.pb.go</span></span></code></pre></figure>
<h3 id="keeper">keeper<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#keeper" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Keepers指的是Cosmos SDK抽象，其作用是<strong>管理对各种模块定义的状态子集的访问(对存储看门的)</strong>。keeper是特定于模块的，即模块定义的状态子集只能由所述模块中定义的keeper访问。如果一个模块需要访问由另一个模块定义的状态子集，则需要将对第二个模块的内部保持器的引用传递给第一个模块。</p>
<p>类型定义如下：</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="go" data-theme="github-light github-dark"><code data-language="go" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Keeper</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // External keepers, if any （引用的外部keeper）</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Store key(s) // storeKeys授予对模块管理的多存储的存储的访问权限。它们应始终不暴露于外部模块</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // codec 编解码器，默认protobuf</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // authority  </span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></figure>
<h3 id="appmodule">AppModule<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#appmodule" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>baseApp通过AppModule接口来统一管理所有模块，其又拆分为AppModuleBasic、AppModuleGenesis、AppModule。</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="go" data-theme="github-light github-dark"><code data-language="go" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AppModule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	AppModuleGenesis</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	RegisterInvariants</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sdk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">InvariantRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 注册消息服务以及查询服务以响应客户端特定请求🚩</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	RegisterServices</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Configurator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	ConsensusVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint64</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span data-line> </span></code></pre></figure>
<p>AppModuleBasic接口定义了应用程序的基础功能，编码注册，Grpc网关路由注册🚩， 交易以及查询命令获取</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="go" data-theme="github-light github-dark"><code data-language="go" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AppModuleBasic</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	Name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	RegisterLegacyAminoCodec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">codec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LegacyAmino</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	RegisterInterfaces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">codectypes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">InterfaceRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	DefaultGenesis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">codec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">JSONCodec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RawMessage</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	ValidateGenesis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">codec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">JSONCodec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">client</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TxEncodingConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RawMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// 将RESTful API 快速转换为 gRPC 服务</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	RegisterGRPCGatewayRoutes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">client</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">runtime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ServeMux</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	GetTxCmd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cobra</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Command</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	GetQueryCmd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cobra</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Command</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></figure>
<p>AppModuleBasic和keeper以及AppModule 三者关系如下：</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="markdown" data-theme="github-light github-dark"><code data-language="markdown" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+------------------------------------------------+</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">|     						 AppModule    								 |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+------------------------------------------------+</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        |      															 |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        |     															 |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        v     														   v</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+---------------------+     +---------------------+</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">|    AppModuleGenesis |     |        keeper     	|</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+---------------------+     +---------------------+</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 				|      															 </span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        |     															</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        v </span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+---------------------+     </span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">|    AppModuleBasic |    </span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">+---------------------+    </span></span>
<span data-line> </span>
<span data-line> </span></code></pre></figure>
<h3 id="modulemanager">moduleManager<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#modulemanager" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Cosmos-SDK的每个功能模块都以AppModule接口的形式暴露给应用。为了方便应用对各个模块的管理，Cosmos-SDK提供了模块管理器，有两种类型的模块管理器，一个用来管理模块实现的AppModuleBasic接口功能；一个用来管理模块在AppModuleBasic之外的AppModule接口功能。应用所需的模块都需要注册到这两个模块管理器中，具体定义如下：</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="go" data-theme="github-light github-dark"><code data-language="go" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> App</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">baseapp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BaseApp</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	ModuleManager     </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Manager</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	...</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	basicManager      </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BasicManager</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Manager</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	Modules                  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{} </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// interface{} is used now to support the legacy AppModule as well as new core appmodule.AppModule.</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	OrderInitGenesis         []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	OrderExportGenesis       []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	OrderBeginBlockers       []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	OrderEndBlockers         []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	OrderPrepareCheckStaters []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	OrderPrecommiters        []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	OrderMigrations          []</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BasicManager</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AppModuleBasic</span></span></code></pre></figure>
<p>模块管理器的引入简化了应用对于模块的管理，应用只需要在初始化时设置好模块管理器这个成员变量，随后与模块的交互都通过该模块管理器来进行即可。例如，当应用接收到ABCI对RequestBeginBlock的请求时，只需要调用模块管理器的BeginBlock()方法，该方法会按照指定的顺序依次调用各个模块的BeginBlock()方法。模块管理器架起了顶层应用与底层模块之间沟通的桥梁.</p>
<h3 id="baseapp">baseApp<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#baseapp" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>baseapp是Cosmos SDK应用程序的样板实现。它附带了ABCI的实现，以处理与底层共识引擎的连接，同时，BaseApp负责对各模块进行管理，包括响应ABCI请求、转发，消息和查询请求给各模块、管理各模块的初始状态和状态转移。</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="go" data-theme="github-light github-dark"><code data-language="go" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseApp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// initialized on creation</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	logger            </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Logger</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	name              </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                      // application name from abci.BlockInfo</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	db                </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dbm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DB</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                      // common DB backend</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	cms               </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">storetypes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CommitMultiStore</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // Main (uncached) state</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	qms               </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">storetypes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MultiStore</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       // Optional alternative multistore for querying only.</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	storeLoader       </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StoreLoader</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                 // function to handle store loading, may be overridden with SetStoreLoader()</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	grpcQueryRouter   </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GRPCQueryRouter</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // router for redirecting gRPC query calls</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	msgServiceRouter  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MsgServiceRouter</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           // router for redirecting Msg service messages</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	interfaceRegistry </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">codectypes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">InterfaceRegistry</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	txDecoder         </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sdk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TxDecoder</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // unmarshal []byte into sdk.Tx</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	txEncoder         </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sdk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TxEncoder</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // marshal sdk.Tx into []byte</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	mempool            </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mempool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Mempool</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // application side mempool</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	anteHandler        </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sdk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AnteHandler</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // ante handler for fee and auth</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	postHandler        </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sdk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PostHandler</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // post handler, optional, e.g. for tips</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	initChainer        </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sdk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">InitChainer</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // initialize state with validators and state blob</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	beginBlocker       </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sdk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BeginBlocker</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           // logic to run before any txs</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	processProposal    </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sdk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProcessProposalHandler</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // the handler which runs on ABCI ProcessProposal</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	prepareProposal    </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sdk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PrepareProposalHandler</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // the handler which runs on ABCI PrepareProposal</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	endBlocker         </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sdk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EndBlocker</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             // logic to run after all txs, and to determine valset changes</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	prepareCheckStater </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sdk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PrepareCheckStater</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // logic to run during commit using the checkState</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	precommiter        </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sdk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Precommiter</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // logic to run during commit using the deliverState</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	addrPeerFilter     </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sdk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PeerFilter</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             // filter peers by address and port</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	idPeerFilter       </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sdk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PeerFilter</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             // filter peers by node ID</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	fauxMerkleMode     </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bool</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                       // if true, IAVL MountStores uses MountStoresDB for simulation speed.</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// manages snapshots, i.e. dumps of app state at certain intervals</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	snapshotManager </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">snapshots</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Manager</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// volatile states:</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	//</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// checkState is set on InitChain and reset on Commit</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// deliverState is set on InitChain and BeginBlock and set to nil on Commit</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	checkState           </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">state</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // for CheckTx</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	deliverState         </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">state</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // for DeliverTx</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	processProposalState </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">state</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // for ProcessProposal</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	prepareProposalState </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">state</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // for PrepareProposal</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// an inter-block write-through cache provided to the context during deliverState</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	interBlockCache </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">storetypes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MultiStorePersistentCache</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// paramStore is used to query for ABCI consensus parameters from an</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// application parameter store.</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	paramStore </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ParamStore</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// The minimum gas prices a validator is willing to accept for processing a</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// transaction. This is mainly used for DoS and spam prevention.</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	minGasPrices </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sdk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DecCoins</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// initialHeight is the initial height at which we start the baseapp</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	initialHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int64</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// flag for sealing options and parameters to a BaseApp</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	sealed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bool</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// block height at which to halt the chain and gracefully shutdown</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	haltHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint64</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// minimum block time (in Unix seconds) at which to halt the chain and gracefully shutdown</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	haltTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint64</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// minRetainBlocks defines the minimum block height offset from the current</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// block being committed, such that all blocks past this offset are pruned</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// from CometBFT. It is used as part of the process of determining the</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// ResponseCommit.RetainHeight value during ABCI Commit. A value of 0 indicates</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// that no blocks should be pruned.</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	//</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// Note: CometBFT block pruning is dependant on this parameter in conjunction</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// with the unbonding (safety threshold) period, state pruning and state sync</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// snapshot parameters to determine the correct minimum value of</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// ResponseCommit.RetainHeight.</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	minRetainBlocks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint64</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// application's version string</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	version </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// application's protocol version that increments on every upgrade</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// if BaseApp is passed to the upgrade keeper's NewKeeper method.</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	appVersion </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint64</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// recovery handler for app.runTx method</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	runTxRecoveryMiddleware </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">recoveryMiddleware</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// trace set will return full stack traces for errors in ABCI Log field</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	trace </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bool</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// indexEvents defines the set of events in the form {eventType}.{attributeKey},</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// which informs CometBFT what to index. If empty, all events will be indexed.</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	indexEvents </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// streamingManager for managing instances and configuration of ABCIListener services</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	streamingManager </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">storetypes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StreamingManager</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	chainID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></figure>
<p>baseApp主要有以下几类成员：</p>
<ul>
<li>基本的日志和存储功能</li>
<li>ABCI相关
<ul>
<li>txDecoder解码 checktx 以及 diliverTx 接收的交易</li>
<li>initChainer、beginBlocker、endBlocker用来响应特定的ABCI请求</li>
<li>checkState和deliverState分别对应交易池连接和共识连接方法所依赖的临时应用状态和上下文环境。</li>
</ul>
</li>
<li>anteHandler: 交易预处理操作，签名验证，gas检查等</li>
</ul>
<h2 id="app-和-cometbft-如何通信">App 和 cometBFT 如何通信<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#app-和-cometbft-如何通信" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>CometBFT通过一个名为ABCI的接口将事务传递给App，app必须实现ABCI。</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="markdown" data-theme="github-light github-dark"><code data-language="markdown" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              +---------------------+</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              |                     |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              |     Application     |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              |                     |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              +--------+---+--------+</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       ^   |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       |   | ABCI</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       |   v</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              +--------+---+--------+</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              |                     |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              |                     |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              |       CometBFT      |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              |                     |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              |                     |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              +---------------------+</span></span></code></pre></figure>
<p>CometBFT 只处理事务字节。它不知道这些字节的含义。CometBFT 所做的只是确定性地对这些事务字节进行排序。CometBFT 通过 ABCI 将字节传递给应用程序，并期望返回代码通知它事务中包含的消息是否被成功处理。</p>
<p>ABCI有以下几个关键消息：</p>
<ul>
<li>CheckTx：当CometBft收到交易时，通过checkTx将传递给应用程序，以检查是否满足了一些基本要求</li>
<li>DeliverTx：当CometBFT接收到有效块时，块中的每个事务都会通过DeliverTx传递给应用程序以便进行处理。正是在这个阶段，状态转换才会发生。</li>
<li>BeginBlock/EndBlock:这些消息在每个块的开始和结束时执行，无论块是否包含事务。将会触发自动执行逻辑。</li>
</ul>
<p>更多细节查看 cometBFT 文档 <a href="https://docs.cometbft.com/v0.37/spec/abci/" class="external">ABCI<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<h3 id="abci">ABCI<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#abci" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Tendermint core 根据分层设计理念将区块链应用分成3层：p2p通信层、共识协议层以及上层应用层。Tendermint core 提供p2p通信以及共识协议实现，并定义了通用的ABCI与上层应用交互，跟上层应用交互时，Tendermint core 作为客户端发起ABCI请求, 上层应用作为服务端进行响应。交互方式支持GRPC、Socket以及进程内交互(基于go开发的sdk).</p>
<p>「<strong>tendermint客户端和上层APP交互</strong>」</p>
<p>tendermint core 设计了 ABCI client, ABCI Server和Application，跟上层应用交互时，Tendermint core 作为客户端向ABCI Server发起ABCI请求, ABCI Server将请求转发给实现了Application接口的上层应用进行处理。上层应用实现了Application接口和ABCI Server， ABCI提供3种ABCI客户端，localClient和grpcClient以及socketClient， localClient可以直接调用上层应用的ABCI方法，不需要ABCI Server.</p>
<p><strong>TODO：再具体的需要研究下tendermint底层</strong> 🚩</p>
<h2 id="一笔交易如何完成生命周期">一笔交易如何完成生命周期<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#一笔交易如何完成生命周期" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="创建交易">创建交易<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#创建交易" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>用户可以通过命令行接口来创建交易，如下：</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shell" data-theme="github-light github-dark"><code data-language="shell" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[appname] tx [command] [args] [flags]</span></span></code></pre></figure>
<h3 id="添加到mempool">添加到mempool<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#添加到mempool" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>每个接收Tx的完整节点（运行CometBFT）都会向应用层发送一条ABCI消息CheckTx，以检查其有效性，并接收一条ABCI.ResponseCheckTx。如果Tx通过检查，它将保存在节点的Mempool中，等待打包， 如果发现Tx无效，则诚实节点会丢弃它。</p>
<h3 id="解码交易">解码交易<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#解码交易" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>当应用程序从底层共识引擎（例如CometBFT）接收到Tx时，它仍然是其编码的[]字节形式，需要解码才能进行处理。</p>
<h3 id="交易基本检查">交易基本检查<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#交易基本检查" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>通过anteHandler 进行签名验证，gas 等检查</p>
<h3 id="将交易包含在一个区块中">将交易包含在一个区块中<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#将交易包含在一个区块中" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>proposer打包交易进区块，此时的交易是有序的</p>
<h3 id="状态改变">状态改变<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#状态改变" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>达成共识的下一步是执行事务以完全验证它们。所有从正确的提议者那里接收到块提议的完整节点都通过调用ABCI函数BeginBlock、每个事务的DeliverTx和EndBlock来执行事务。虽然每个完整节点都在本地运行所有内容，但由于消息的状态转换是确定性的，并且事务在块建议中是明确排序的，因此该过程会产生一个单一的、明确的结果。</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="markdown" data-theme="github-light github-dark"><code data-language="markdown" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        -----------------------</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        |Receive Block Proposal|</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        -----------------------</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                  |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              v</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        -----------------------</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        | BeginBlock          |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        -----------------------</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                  |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              v</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        -----------------------</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        | DeliverTx(tx0)      |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        | DeliverTx(tx1)      |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        | DeliverTx(tx2)      |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        | DeliverTx(tx3)      |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        |   .         |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        |   .         |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        |   .         |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        -----------------------</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                  |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              v</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        -----------------------</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        | EndBlock        |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        -----------------------</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                  |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              v</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        -----------------------</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        | Consensus       |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        -----------------------</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                  |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              v</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        -----------------------</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        | Commit          |</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        -----------------------</span></span></code></pre></figure>
<p>DiliverTx完成了大部分的状态转换，顺序的执行块中的每个事务，其大概做了以下事情</p>
<ul>
<li>
<p>解码事务</p>
</li>
<li>
<p>通过validateBasic和anteHandler执行相关的校验</p>
</li>
<li>
<p>MsgServicerouter会在app中注册相应的handler，所以通过了校验之后会根据runmsgs去路由到相关的handler去处理消息</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="go" data-theme="github-light github-dark"><code data-language="go" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">handler </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MsgServiceRouter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msgResult, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(app.ctx, msg)</span></span></code></pre></figure>
</li>
<li>
<p>msg service: Protobuf-Msg server负责执行Tx中的每个消息，并改变diliver state</p>
</li>
</ul>
<h3 id="commit">commit<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#commit" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Validator节点执行交易进行状态改变，然后对块进行签名以进行确认。最后一步是节点提交块和状态更改。</p>
<p>当他们收到足够的验证器投票（2/3+按投票权加权的预提交）时，完整的节点提交到要添加到区块链的新块，并在应用层中完成状态转换。生成一个新的状态根，作为状态转换的merkle证明。应用程序使用从Baseapp继承的Commit ABCI方法；它通过将deliveryState写入应用程序的内部状态来同步所有状态转换。一旦提交了状态更改，checkState就会从最近提交的状态重新开始，deliveryState会重置为nil，以保持一致并反映更改。</p>
<p>此时，Tx的事务生命周期已经结束：节点已经验证了它的有效性，通过执行状态更改来传递它，并提交这些更改。</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="GO" data-theme="github-light github-dark"><code data-language="GO" data-theme="github-light github-dark" style="display:grid;"><span data-line><span>tendermint :</span></span>
<span data-line><span>ExecCommitBlock -> CommitSync -> app.Application.Commit()</span></span>
<span data-line> </span>
<span data-line><span>cosmos sdk:</span></span>
<span data-line><span>func (app *BaseApp) Commit() abci.ResponseCommit {</span></span>
<span data-line><span>  ...</span></span>
<span data-line><span>  app.setState(runTxModeCheck, header)</span></span>
<span data-line><span>}</span></span></code></pre></figure>
<h2 id="基于cosmos-sdk-构建的知名项目">基于cosmos sdk 构建的知名项目<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#基于cosmos-sdk-构建的知名项目" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="defi">Defi<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#defi" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ul>
<li>
<p>Osmosis: Osmosis 允许用户在不同的区块链之间交换代币和流动性。它支持多种流动性池，例如 AMM (自动做市商)、定向流动性和资本池等。用户可以通过提供流动性和交易费用来赚取收益，并参与 Osmosis 生态系统的治理和发展。</p>
</li>
<li>
<p>Binance chain ：Binance Chain 是由 Binance 推出的一个专为去中心化交易所 (DEX) 设计的区块链</p>
</li>
<li>
<p>terra ：Terra 是一个稳定币生态系统，它由多个与法定货币挂钩的稳定币组成，例如 TerraUSD (UST) 稳定币和 TerraKRW (KRT) 稳定币。Terra 使用 Cosmos SDK 和 Tendermint 共识机制构建。</p>
</li>
</ul>
<h3 id="智能合约平台">智能合约平台<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#智能合约平台" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ul>
<li>Evmos： Evmos 支持以太坊的智能合约和 ERC20 代币，同时也支持 Cosmos SDK 的模块。</li>
</ul>
<h3 id="跨链">跨链<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#跨链" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ul>
<li>Gravity Bridge： Gravity Bridge 基于 IBC (Inter-Blockchain Communication) 协议，它允许不同的区块链之间进行安全、可靠、无信任的跨链通信</li>
</ul>
<p>Layer2</p>
<ul>
<li>Celestia: 模块化区块链，cosmos 的二层网络，作为基于cosmos sdk开发的应用链的DA层</li>
</ul>
<h3 id="预言机">预言机<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#预言机" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ul>
<li>Band Protocol: 是一个去中心化预言机协议，它通过提供可靠、高效、安全的数据源，使得区块链应用可以获取和验证现实世界的数据。它具有去中心化、可扩展性、多链支持和稳定性等特性，为区块链生态系统提供了重要的数据服务</li>
</ul>
<h2 id="与cosmos-sdk类似的设计">与cosmos sdk类似的设计<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#与cosmos-sdk类似的设计" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ol>
<li>Substrate：Substrate 是一个基于 Rust 语言的区块链框架，由 Parity Technologies 开发。它采用了模块化的设计理念，使得开发者可以根据自己的需求选择和组合不同的模块，从而快速构建自己的区块链应用。Substrate 支持多种共识机制、智能合约语言和网络协议，具有高度的可扩展性和安全性。</li>
<li>NEAR Protocol：NEAR Protocol 是一个基于 Rust 语言的公共区块链平台，它采用了类似于 Cosmos SDK 的模块化设计理念。NEAR Protocol 支持多种共识机制和智能合约语言，具有高度的可扩展性和安全性。</li>
</ol></article><hr/><div class="page-footer"></div></div><div class="right sidebar"><div class="graph"><h3>关系图谱</h3><div class="graph-outer"><div class="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false,&quot;enableRadial&quot;:false}"></div><button class="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div class="global-graph-outer"><div class="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.2,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true,&quot;enableRadial&quot;:true}"></div></div></div><div class="toc desktop-only"><button type="button" class="toc-header" aria-controls="toc-187" aria-expanded="true"><h3>目录</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><ul id="list-1" class="toc-content overflow"><li class="depth-0"><a href="#cosmos-sdk-简介" data-for="cosmos-sdk-简介">cosmos sdk 简介</a></li><li class="depth-0"><a href="#cosmos-应用链设计架构" data-for="cosmos-应用链设计架构">cosmos 应用链设计架构</a></li><li class="depth-0"><a href="#为什么要用cosmos-sdk-构建链" data-for="为什么要用cosmos-sdk-构建链">为什么要用cosmos sdk 构建链</a></li><li class="depth-0"><a href="#cosmos-sdk-架构设计" data-for="cosmos-sdk-架构设计">cosmos sdk 架构设计</a></li><li class="depth-1"><a href="#keeper" data-for="keeper">keeper</a></li><li class="depth-1"><a href="#appmodule" data-for="appmodule">AppModule</a></li><li class="depth-1"><a href="#modulemanager" data-for="modulemanager">moduleManager</a></li><li class="depth-1"><a href="#baseapp" data-for="baseapp">baseApp</a></li><li class="depth-0"><a href="#app-和-cometbft-如何通信" data-for="app-和-cometbft-如何通信">App 和 cometBFT 如何通信</a></li><li class="depth-1"><a href="#abci" data-for="abci">ABCI</a></li><li class="depth-0"><a href="#一笔交易如何完成生命周期" data-for="一笔交易如何完成生命周期">一笔交易如何完成生命周期</a></li><li class="depth-1"><a href="#创建交易" data-for="创建交易">创建交易</a></li><li class="depth-1"><a href="#添加到mempool" data-for="添加到mempool">添加到mempool</a></li><li class="depth-1"><a href="#解码交易" data-for="解码交易">解码交易</a></li><li class="depth-1"><a href="#交易基本检查" data-for="交易基本检查">交易基本检查</a></li><li class="depth-1"><a href="#将交易包含在一个区块中" data-for="将交易包含在一个区块中">将交易包含在一个区块中</a></li><li class="depth-1"><a href="#状态改变" data-for="状态改变">状态改变</a></li><li class="depth-1"><a href="#commit" data-for="commit">commit</a></li><li class="depth-0"><a href="#基于cosmos-sdk-构建的知名项目" data-for="基于cosmos-sdk-构建的知名项目">基于cosmos sdk 构建的知名项目</a></li><li class="depth-1"><a href="#defi" data-for="defi">Defi</a></li><li class="depth-1"><a href="#智能合约平台" data-for="智能合约平台">智能合约平台</a></li><li class="depth-1"><a href="#跨链" data-for="跨链">跨链</a></li><li class="depth-1"><a href="#预言机" data-for="预言机">预言机</a></li><li class="depth-0"><a href="#与cosmos-sdk类似的设计" data-for="与cosmos-sdk类似的设计">与cosmos sdk类似的设计</a></li><li class="overflow-end"></li></ul></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v1.0.0</a> © 2026</p><ul><li><a href="https://github.com/mindcarver">GitHub</a></li></ul></footer></div></div></body><script type="application/javascript" data-persist="true">function n(){let t=this.parentElement;t.classList.toggle("is-collapsed");let e=t.getElementsByClassName("callout-content")[0];if(!e)return;let l=t.classList.contains("is-collapsed");e.style.gridTemplateRows=l?"0fr":"1fr"}function c(){let t=document.getElementsByClassName("callout is-collapsible");for(let e of t){let l=e.getElementsByClassName("callout-title")[0],s=e.getElementsByClassName("callout-content")[0];if(!l||!s)continue;l.addEventListener("click",n),window.addCleanup(()=>l.removeEventListener("click",n));let o=e.classList.contains("is-collapsed");s.style.gridTemplateRows=o?"0fr":"1fr"}}document.addEventListener("nav",c);
</script><script type="module" data-persist="true">function E(a,e){if(!a)return;function t(o){o.target===this&&(o.preventDefault(),o.stopPropagation(),e())}function n(o){o.key.startsWith("Esc")&&(o.preventDefault(),e())}a?.addEventListener("click",t),window.addCleanup(()=>a?.removeEventListener("click",t)),document.addEventListener("keydown",n),window.addCleanup(()=>document.removeEventListener("keydown",n))}function f(a){for(;a.firstChild;)a.removeChild(a.firstChild)}var m=class{constructor(e,t){this.container=e;this.content=t;this.setupEventListeners(),this.setupNavigationControls(),this.resetTransform()}isDragging=!1;startPan={x:0,y:0};currentPan={x:0,y:0};scale=1;MIN_SCALE=.5;MAX_SCALE=3;cleanups=[];setupEventListeners(){let e=this.onMouseDown.bind(this),t=this.onMouseMove.bind(this),n=this.onMouseUp.bind(this),o=this.onTouchStart.bind(this),r=this.onTouchMove.bind(this),i=this.onTouchEnd.bind(this),s=this.resetTransform.bind(this);this.container.addEventListener("mousedown",e),document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),this.container.addEventListener("touchstart",o,{passive:!1}),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",i),window.addEventListener("resize",s),this.cleanups.push(()=>this.container.removeEventListener("mousedown",e),()=>document.removeEventListener("mousemove",t),()=>document.removeEventListener("mouseup",n),()=>this.container.removeEventListener("touchstart",o),()=>document.removeEventListener("touchmove",r),()=>document.removeEventListener("touchend",i),()=>window.removeEventListener("resize",s))}cleanup(){for(let e of this.cleanups)e()}setupNavigationControls(){let e=document.createElement("div");e.className="mermaid-controls";let t=this.createButton("+",()=>this.zoom(.1)),n=this.createButton("-",()=>this.zoom(-.1)),o=this.createButton("Reset",()=>this.resetTransform());e.appendChild(n),e.appendChild(o),e.appendChild(t),this.container.appendChild(e)}createButton(e,t){let n=document.createElement("button");return n.textContent=e,n.className="mermaid-control-button",n.addEventListener("click",t),window.addCleanup(()=>n.removeEventListener("click",t)),n}onMouseDown(e){e.button===0&&(this.isDragging=!0,this.startPan={x:e.clientX-this.currentPan.x,y:e.clientY-this.currentPan.y},this.container.style.cursor="grabbing")}onMouseMove(e){this.isDragging&&(e.preventDefault(),this.currentPan={x:e.clientX-this.startPan.x,y:e.clientY-this.startPan.y},this.updateTransform())}onMouseUp(){this.isDragging=!1,this.container.style.cursor="grab"}onTouchStart(e){if(e.touches.length!==1)return;this.isDragging=!0;let t=e.touches[0];this.startPan={x:t.clientX-this.currentPan.x,y:t.clientY-this.currentPan.y}}onTouchMove(e){if(!this.isDragging||e.touches.length!==1)return;e.preventDefault();let t=e.touches[0];this.currentPan={x:t.clientX-this.startPan.x,y:t.clientY-this.startPan.y},this.updateTransform()}onTouchEnd(){this.isDragging=!1}zoom(e){let t=Math.min(Math.max(this.scale+e,this.MIN_SCALE),this.MAX_SCALE),n=this.content.getBoundingClientRect(),o=n.width/2,r=n.height/2,i=t-this.scale;this.currentPan.x-=o*i,this.currentPan.y-=r*i,this.scale=t,this.updateTransform()}updateTransform(){this.content.style.transform=`translate(${this.currentPan.x}px, ${this.currentPan.y}px) scale(${this.scale})`}resetTransform(){let t=this.content.querySelector("svg").getBoundingClientRect(),n=t.width/this.scale,o=t.height/this.scale;this.scale=1,this.currentPan={x:(this.container.clientWidth-n)/2,y:(this.container.clientHeight-o)/2},this.updateTransform()}},T=["--secondary","--tertiary","--gray","--light","--lightgray","--highlight","--dark","--darkgray","--codeFont"],y;document.addEventListener("nav",async()=>{let e=document.querySelector(".center").querySelectorAll("code.mermaid");if(e.length===0)return;y||=await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.esm.min.mjs");let t=y.default,n=new WeakMap;for(let r of e)n.set(r,r.innerText);async function o(){for(let s of e){s.removeAttribute("data-processed");let c=n.get(s);c&&(s.innerHTML=c)}let r=T.reduce((s,c)=>(s[c]=window.getComputedStyle(document.documentElement).getPropertyValue(c),s),{}),i=document.documentElement.getAttribute("saved-theme")==="dark";t.initialize({startOnLoad:!1,securityLevel:"loose",theme:i?"dark":"base",themeVariables:{fontFamily:r["--codeFont"],primaryColor:r["--light"],primaryTextColor:r["--darkgray"],primaryBorderColor:r["--tertiary"],lineColor:r["--darkgray"],secondaryColor:r["--secondary"],tertiaryColor:r["--tertiary"],clusterBkg:r["--light"],edgeLabelBackground:r["--highlight"]}}),await t.run({nodes:e})}await o(),document.addEventListener("themechange",o),window.addCleanup(()=>document.removeEventListener("themechange",o));for(let r=0;r<e.length;r++){let v=function(){let g=l.querySelector("#mermaid-space"),h=l.querySelector(".mermaid-content");if(!h)return;f(h);let w=i.querySelector("svg").cloneNode(!0);h.appendChild(w),l.classList.add("active"),g.style.cursor="grab",u=new m(g,h)},M=function(){l.classList.remove("active"),u?.cleanup(),u=null},i=e[r],s=i.parentElement,c=s.querySelector(".clipboard-button"),d=s.querySelector(".expand-button"),p=window.getComputedStyle(c),L=c.offsetWidth+parseFloat(p.marginLeft||"0")+parseFloat(p.marginRight||"0");d.style.right=`calc(${L}px + 0.3rem)`,s.prepend(d);let l=s.querySelector("#mermaid-container");if(!l)return;let u=null;d.addEventListener("click",v),E(l,M),window.addCleanup(()=>{u?.cleanup(),d.removeEventListener("click",v)})}});
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript" data-persist="true"></script><script src="../../../../../postscript.js" type="module" data-persist="true"></script></html>